# AWS SageMaker Domain Terraform module
Terraform module for AWS SageMaker Domain creation

## Usage

```hcl
module "sagemaker_domain" {
  source  = "data-platform-hq/sagemaker-domain/aws"
  version = "~> 1.0"
  
  tags = {
    ENV = "DEV"
  }
  
  domain_name = "domain1"
  auth_mode   = "IAM"
  default_user_settings = {
    execution_role = "arn:aws:iam::123456789123:role/service-role/role1"
  }
  vpc_id     = "vpc-312434325435435"
  subnet_ids = ["subnet-1424215135", "subnet-125151515", "subnet-5654251356"]
}
```

<!-- BEGIN_TF_DOCS -->
## Requirements

| Name                                                                        | Version  |
|-----------------------------------------------------------------------------|----------|
| <a name="requirement_terraform"></a> [terraform](#requirement\_terraform)   | >= 1.0   |
| <a name="requirement_aws"></a> [aws](#requirement\_aws)                     | >= 5.1.0 |

## Providers

| Name                                                | Version  |
|-----------------------------------------------------|----------|
| <a name="provider_aws"></a> [aws](#provider\_aws)   | >= 5.1.0 |

## Modules

No modules.

## Resources

| Name                                                                                                                      | Type     |
|---------------------------------------------------------------------------------------------------------------------------|----------|
| [aws_sagemaker_domain.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/sagemaker_domain) | resource |

## Inputs

| Name                                                                                                                                                          | Description                                                                                                                                           | Type                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | Default                                                     | Required |
|---------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------|:--------:|
| <a name="input_create"></a> [create](#input\_create)                                                                                                          | Controls if resources should be created (affects nearly all resources)                                                                                | `bool`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | `true`                                                      |    no    |
| <a name="input_tags"></a> [tags](#input\_tags)                                                                                                                | A map of tags to add to all resources                                                                                                                 | `map(string)`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | `{}`                                                        |    no    |
| <a name="input_domain_name"></a> [domain\_name](#input\_domain\_name)                                                                                         | The domain name                                                                                                                                       | `string`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | n/a                                                         |   yes    |
| <a name="input_auth_mode"></a> [auth\_mode](#input\_auth\_mode)                                                                                               | The mode of authentication that members use to access the domain. Valid values are IAM and SSO                                                        | `string`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | n/a                                                         |   yes    |
| <a name="input_default_user_settings"></a> [default\_user\_settings](#input\_default\_user\_settings)                                                         | The default user settings                                                                                                                             | `See type in variables.tf file`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | n/a                                                         |   yes    |
| <a name="input_vpc_id"></a> [vpc\_id](#input\_vpc\_id)                                                                                                        | The ID of the Amazon Virtual Private Cloud (VPC) that Studio uses for communication                                                                   | `string`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | n/a                                                         |   yes    |
| <a name="input_subnet_ids"></a> [subnet\_ids](#input\_subnet\_ids)                                                                                            | The VPC subnets that Studio uses for communication                                                                                                    | `list(string)`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | n/a                                                         |   yes    |
| <a name="input_app_network_access_type"></a> [app\_network\_access\_type](#input\_app\_network\_access\_type)                                                 | Specifies the VPC used for non-EFS traffic                                                                                                            | `string`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `PublicInternetOnly`                                        |    no    |
| <a name="input_app_security_group_management"></a> [app\_security\_group\_management](#input\_app\_security\_group\_management)                               | The entity that creates and manages the required security groups for inter-app communication in VPCOnly mode. Valid values are Service and Customer   | `string`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `null`                                                      |    no    |
| <a name="input_domain_settings"></a> [domain\_settings](#input\_domain\_settings)                                                                             | The domain's settings                                                                                                                                 | <pre>object({<br/>  execution_role_identity_config = optional(string)<br/>  security_group_ids             = optional(list(string))<br/>  r_studio_server_pro_domain_settings = optional(object({<br/>    domain_execution_role_arn    = string<br/>    r_studio_connect_url         = optional(string)<br/>    r_studio_package_manager_url = optional(string)<br/>    default_resource_spec = optional(object({<br/>      instance_type               = optional(string)<br/>      lifecycle_config_arn        = optional(string)<br/>      sagemaker_image_arn         = optional(string)<br/>      sagemaker_image_version_arn = optional(string)<br/>    }))<br/>    }))<br/>  })</pre> | `null`                                                      |    no    |
| <a name="input_kms_key_id"></a> [kms\_key\_id](#input\_kms\_key\_id)                                                                                          | The AWS KMS customer managed CMK used to encrypt the EFS volume attached to the domain                                                                | `string`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `null`                                                      |    no    |
| <a name="input_retention_policy_home_efs_file_system"></a> [retention\_policy\_home\_efs\_file\_system](#input\_retention\_policy\_home\_efs\_file\_system)   | The retention policy for data stored on an Amazon Elastic File System (EFS) volume. Valid values are Retain or Delete                                 | `string`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | `null`                                                      |    no    |

## Outputs

| Name                                                                                                                                                                                       | Description                                                                                                        |
|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------|
| <a name="output_id"></a> [id](#output\_id)                                                                                                                                                 | The ID of the Domain                                                                                               |
| <a name="output_arn"></a> [arn](#output\_arn)                                                                                                                                              | The Amazon Resource Name (ARN) assigned by AWS to this Domain                                                      |
| <a name="output_url"></a> [url](#output\_url)                                                                                                                                              | The domain's URL                                                                                                   |
| <a name="output_single_sign_on_managed_application_instance_id"></a> [single\_sign\_on\_managed\_application\_instance\_id](#output\_single\_sign\_on\_managed\_application\_instance\_id) | The SSO managed application instance ID                                                                            |
| <a name="output_security_group_id_for_domain_boundary"></a> [security\_group\_id\_for\_domain\_boundary](#output\_security\_group\_id\_for\_domain\_boundary)                              | The ID of the security group that authorizes traffic between the RSessionGateway apps and the RStudioServerPro app |
| <a name="output_home_efs_file_system_id"></a> [home\_efs\_file\_system\_id](#output\_home\_efs\_file\_system\_id)                                                                          | The ID of the Amazon Elastic File System (EFS) managed by this Domain                                              |
<!-- END_TF_DOCS -->

## License

Apache 2 Licensed. For more information please see [LICENSE](https://github.com/data-platform-hq/terraform-azurerm-linux-web-app/tree/main/LICENSE)
